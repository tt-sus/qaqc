<div class="container">
    <div class="timeline-wrapper">
        <h3> {{timelineToShow?.project_number}} // {{timelineToShow?.project_name}}</h3>
        <button type="button" class="btn btn-default btn-sm pull-right" data-toggle="modal" data-target="#myModal"(click)="edit=false">New Task</button>
        <p><b> Project Manager:</b> {{timelineToShow?.manager}}</p>
        <!--modal-->
        <div id="myModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Create Task</h4>
                </div>
                <div class="modal-body">
                <form class="form-horizontal" [formGroup]="inputsForm">
                    <div class="form-group">
                        <label class="control-label col-sm-4" for="email">Task Name</label>
                        <div class="col-sm-6">
                        <input  type="text" 
                                class="form-control" 
                                placeholder="Task Name"
                                formControlName="taskName"
                                [(ngModel)]="taskName"
                                name="taskName">
                        </div>
                    </div>
                    <div class="form-group" >
                        <label class="control-label col-sm-4" for="pwd">Category Name:</label>
                        <div class="col-sm-6"> 
                        <input  type="text" 
                                class="form-control" 
                                placeholder="Category"
                                formControlName=category
                                [(ngModel)]="category"
                                name="category">
                        </div>
                    </div>
                    <div class="form-group" >
                        <label class="control-label col-sm-4" for="pwd">Assign To:</label>
                        <div class="col-sm-6"> 
                        <input  type="text" 
                                class="form-control" 
                                placeholder="Assign To"
                                formControlName="assigned_to"
                                [(ngModel)]="assigned_to"
                                name="assigned_to">
                        </div>
                    </div>
                    <div class="form-group"> 
                    <label class="control-label col-sm-4" for="pwd">Start Date:</label>
                        <div class="col-sm-6"> 
                        <input  
                                (ngModelChange)="startDate = $event" 
                                type="date" 
                                name="startDate"
                                formControlName="startDate">
                        </div>
                    </div>
                    <div class="form-group"> 
                    <label class="control-label col-sm-4" for="pwd">Due Date:</label>
                        <div class="col-sm-6"> 
                        <input  
                                (ngModelChange)="dueDate = $event" 
                                type="date" 
                                name="dueDate"
                                formControlName="dueDate">
                        </div>
                    </div>
                    <div class="form-group"> 
                    <label class="control-label col-sm-4" for="pwd">Task Description</label>
                        <div class="col-sm-6"> 
                        <textarea  
                                    formControlName="details" 
                                    [(ngModel)]="details"
                                    rows="3">
                        </textarea>
                        </div>
                    </div>
                </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default"(click)="addTask()" *ngIf="!edit">Add</button>
                     <button type="button" class="btn btn-default"(click)="editTask()" *ngIf="edit" >Edit</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
                </div>

            </div>
            </div>
               <!--edit Modalend ednd-->
        <ul class="timeline">
            <li *ngFor="let item of taskList; let i =index"  class="timelineItem row col-lg-12">
                <!-- timelineItem-left -->
                <div class="timelineItem-left col-lg-2 ">
                    <p>{{item.start_date}}</p>
                </div>

                <!-- timelineItem-middle -->
                <div class="timelineItem-body col-lg-8">
                    <span></span>
                    <img class="img-circle timeline-avatar" src="https://spark.thorntontomasetti.com/people/vgooje@thorntontomasetti.com/avatar/40.png" title="Michael Pulaski">
                    <div class="header">
                        <strong class="text-capitalize"> {{item.task_name}} </strong> // {{item.assigned_to}}
                    </div>
                    <div class="col-lg-12 details itemContent">
                        {{item.details}} 
                    </div>
                    <div class="col-lg-4 details">
                        <p><strong class="text-capitalize">Start Date:</strong> {{item.start_date}}</p>
                    </div>
                    <div class="col-lg-4 details">
                         <p><strong class="text-capitalize">Due Date:</strong> {{item.due_date}}</p>
                    </div>
                    <div class="col-lg-3 details">
                        <p><strong class="text-capitalize">Category:</strong> {{item.category}}</p>
                    </div>
                    <div class="col-lg-1 details">
                        <button type="button" class="btn btn-sm action-buttons" data-toggle="collapse" [attr.data-target]="'#' + i"(click)= "getTask(item.$key)">+</button>
                        
                    </div>
                    <div class="clearfix"></div>
                    <div id={{i}} class="collapse collapse-content ">
                         <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#inputPanel{{i}}">QC Form</a>
                                </h4>
                                </div>
                                <div id="inputPanel{{i}}" class="panel-collapse collapse in">
                                    <div class="panel-body">
                                <!-- Nav tabs -->
                                    <ul class="nav nav-pills" role="tablist">
                                        <li class="nav-item active">
                                        <a class="nav-link active" data-toggle="tab" href="#qc1{{i}}" role="tab">QC-1</a>
                                        </li>
                                        <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#qc2{{i}}" role="tab">QC-2</a>
                                        </li>
                                        <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#qcc{{i}}" role="tab">QC Results</a>
                                        </li>
                                    </ul>
                                <!-- Tab panes -->
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="qc1{{i}}" role="tabpanel">
                                            <app-qc1 [taskId]="item.$key"></app-qc1>
                                        </div>
                                        <div class="tab-pane " id="qc2{{i}}" role="tabpane2">
                                             <app-qc2 [taskId]="item.$key"></app-qc2>
                                        </div>
                                        <div class="tab-pane " id="qcc{{i}}" role="tabpane2">
                                             <app-qc-results [taskId]="item.$key"></app-qc-results>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                         
                    </div>
                    <div class="clearfix"></div>

                </div>

                <!-- timelineItem-right -->
                <div class="timelineItem-edit col-lg-2">
                    <button type="button" class="btn btn-default btn-sm btn-circle action-buttons col-lg-6 " data-toggle="modal" data-target="#myModal" (click)="getTask(item.$key)"><span class="glyphicon glyphicon-pencil"></span></button>
                    <button type="button" class="btn btn-default btn-sm btn-circle action-buttons col-lg-6" (click)="getTask(item.$key);deleteTask()"><span class="glyphicon glyphicon-remove"></span></button>
                </div>
           </li>
       </ul>
    </div>
</div>